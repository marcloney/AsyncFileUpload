(function(e){var f,k,n,g,p=0,q,r,s,h=[],l=function(a){a.stopPropagation();a.preventDefault();g.removeClass("dragover");a=a.target.files||a.dataTransfer.files;for(var d=0;d<a.length;d++){var b=a[d],t="other pdf image word zip video audio".split(" "),f=void 0,f=0<=b.type.indexOf("pdf")?1:0<=b.type.indexOf("image")?2:0<=b.type.indexOf("word")?3:0<=b.type.indexOf("zip")?4:0<=b.type.indexOf("video")?5:0<=b.type.indexOf("audio")?6:0;b.meta={};b.meta.name=b.name;var j=b.meta,c;c=b.size;c=0<=c&&1024>c?c+
" B":1024<=c&&1048576>c?(c/1024).toFixed(2)+" KB":1048576<=c&&1073741824>c?(c/1048576).toFixed(2)+" MB":1073741824<=c&&1099511627776>c?(c/1073741824).toFixed(2)+" GB":1099511627776<=c?(c/1099511627776).toFixed(2)+" TB":c+" B";j.size=c;b.meta.type=t[f];h.push(b);j=e("<tr />").attr("id",window.btoa(b.name)).appendTo(k);e("<td />").html('<img src="'+s+"/"+t[f]+'.png" />').appendTo(j);e("<td />").html(b.name).appendTo(j);e("<td />").html("").appendTo(j);e("<td />").addClass("progress").appendTo(j)}},
u=function(a){var d=new XMLHttpRequest;if(d.upload){var b=k.find("tr[id='"+window.btoa(a.name)+"'] td:last");d.upload.addEventListener("progress",function(a){a=parseInt(100*(a.loaded/a.total));b.html(a+"%")},!1);d.onreadystatechange=function(){4==d.readyState&&(b.html(200==d.status?"success":"failure"),p++,p>=h.length&&q(h))};d.open("POST",r,!0);d.setRequestHeader("X_FILENAME",a.name);d.send(a)}},m={init:function(a){k=f.find("#file-status");n=f.find("#file-select");g=f.find("#file-drag");r=a.upload_url;
s=a.images_url;n.on("change",l);g.on("dragover",function(a){a.stopPropagation();a.preventDefault();e(this).addClass("dragover")}).on("dragleave",function(a){a.stopPropagation();a.preventDefault();e(this).removeClass("dragover")});(new XMLHttpRequest).upload&&g.get(0).addEventListener("drop",l,!1)},upload:function(a){q=a;for(a=0;a<h.length;a++)u(h[a])},destroy:function(){g.off();g.get(0).removeEventListener("drop",l);h=[]}};e.fn.cUpload=function(a){f=this;if(window.File&&window.FileList&&window.FileReader){if(m[a])return m[a].apply(this,
Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return m.init.apply(this,arguments);e.error("Method "+a+" does not exist on jQuery.cUpload.")}else e.error("jQuery.cUpload requires your browser to support the HTML5 File API.")}})(jQuery);